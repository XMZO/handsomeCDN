!function(){"use strict";const t={dirUrl:"https://cdn.loli-con.cn/imgs/mobile/bg/",manifestUrl:"https://cdn.loli-con.cn/imgs/mobile/bg/manifest.json",mediaQuery:"(max-width: 767px)",cacheMs:0,imageExtRe:/\.(avif|webp|png|jpe?g|gif|bmp|heic|heif)$/i,targets:["html.bg",".cool-transparent .off-screen + #content"],fallbackColor:"#6A6B6F"};function e(t){const e=new Image;e.referrerPolicy="origin",e.src=t}function n(e){const n=`url(${JSON.stringify(e)}) center center no-repeat fixed ${t.fallbackColor};`,r=`\n@media ${t.mediaQuery}{\n  ${t.targets.map(t=>`${t}{background:${n}background-size:cover;}`).join("\n  ")}\n}`,a=document.createElement("style");a.setAttribute("data-mobile-any-bg","1"),a.textContent=r,document.head.appendChild(a)}async function r(){const r=function(){try{const e=localStorage.getItem("mobileBgAnyData");if(!e)return null;const n=JSON.parse(e);return n&&n.url&&"number"==typeof n.time?t.cacheMs>0&&Date.now()-n.time>t.cacheMs||0===t.cacheMs?null:n.url:null}catch(t){return null}}();if(r)return e(r),void n(r);let a=await async function(){try{const e=await fetch(t.manifestUrl,{credentials:"omit"});if(!e.ok)return[];const n=await e.json();return Array.isArray(n)&&n.length?n.map(e=>e.startsWith("http")?e:t.dirUrl+e):[]}catch(t){return[]}}();if(a.length||(a=await async function(){try{const e=await fetch(t.dirUrl,{credentials:"omit"});if(!e.ok)return[];const n=await e.text(),r=new Set,a=/(href|src)\s*=\s*["']([^"']+)["']/gi;let c;for(;c=a.exec(n);){const e=c[2];let n=e;/^https?:\/\//i.test(e)||(n=e.startsWith("/")?e.slice(1):e,n=t.dirUrl+n),t.imageExtRe.test(n)&&r.add(n)}return Array.from(r)}catch(t){return[]}}()),!a.length)return;const c=(i=a)[Math.floor(Math.random()*i.length)];var i;t.cacheMs>0&&function(t){try{localStorage.setItem("mobileBgAnyData",JSON.stringify({url:t,time:Date.now()}))}catch(t){}}(c),e(c),n(c)}window.matchMedia&&matchMedia(t.mediaQuery).matches&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",r,{once:!0}):r())}();